<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>æ–¹æ¡ˆ2: äº’åŠ¨åå‡ºå£°</title>
  <style>

  </style>
</head>
<body>
  <div class="video-container">
    <video src="./test.mp4"></video>
    <div class="modal">
      <button class="btn">æ‰“å¼€å£°éŸ³</button>
    </div>
  </div>

  <!-- 
  æ–¹æ¡ˆ2: äº’åŠ¨åå‡ºå£°ï¼ˆæ¨èï¼šå¦‚æŠ–éŸ³ğŸ”¥ï¼‰
    å…ˆé™éŸ³æ’­æ”¾ï¼Œç„¶åæ ¹æ®æ˜¯å¦èƒ½è‡ªåŠ¨æ’­æ”¾å†³å®šæ˜¯å¦å–æ¶ˆé™éŸ³ï¼Œå¦‚æœï¼š
    1. èƒ½è‡ªåŠ¨æ’­æ”¾ï¼Œå–æ¶ˆé™éŸ³
    2. ä¸èƒ½è‡ªåŠ¨æ’­æ”¾ï¼Œå¼•å¯¼ç”¨æˆ·è¿›è¡Œäº’åŠ¨æ“ä½œåå–æ¶ˆé™éŸ³
   -->

  <script>
    const video = document.querySelector('video');
    const modal = document.querySelector('.modal');
    const btn = document.querySelector('.btn');
    function play() {
      // å…ˆé™éŸ³æ’­æ”¾
      video.muted = true; // é™éŸ³
      video.play();
      // ç„¶åæ ¹æ®æ˜¯å¦èƒ½è‡ªåŠ¨æ’­æ”¾å†³å®šæ˜¯å¦å–æ¶ˆé™éŸ³
      const ctx = new AudioContext();
      // èƒ½è‡ªåŠ¨æ’­æ”¾ï¼Œstate çŠ¶æ€æ˜¯ 'running'
      const canAutoPlay = ctx.state === 'running'
      ctx.close(); // å…³é—­ä¸Šä¸‹æ–‡ï¼Œé‡Šæ”¾èµ„æº
      if (canAutoPlay) {
        // èƒ½è‡ªåŠ¨æ’­æ”¾
        video.muted = false; // å–æ¶ˆé™éŸ³
        // å–æ¶ˆè’™å±‚
        modal.style.display = 'none';
        // ç§»é™¤ç‚¹å‡»äº‹ä»¶
        btn.removeEventListener('click', play);
      } else {
        // ä¸èƒ½è‡ªåŠ¨æ’­æ”¾
        // æ˜¾ç¤ºè’™å±‚
        modal.style.display = 'flex';
        // æ·»åŠ ç‚¹å‡»äº‹ä»¶
        btn.addEventListener('click', play);
      }
    }
    play();
  </script>
</body>
</html>